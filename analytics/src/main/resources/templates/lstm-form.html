<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>LSTM Forecast – Form</title>
    <link rel="stylesheet" th:href="@{/style.css}"/>

    <style>
        body {
            background: #f4f7fb;
        }

        .page-wrapper {
            max-width: 900px;
            margin: auto;
            padding: 20px;
        }

        .ta-form-card {
            margin: 40px auto;
            background: #ffffff;
            color: #2c3e4f;
            border-radius: 14px;
            padding: 28px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
            border: 1px solid rgba(30, 58, 138, 0.15);
        }

        .ta-form-card h1 {
            font-size: 32px;
            margin-bottom: 20px;
            text-align: center;
            color: #2c3e4f;
        }

        .ta-form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 18px 24px;
            margin-bottom: 20px;
        }

        .ta-form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .ta-form-group label {
            font-size: 14px;
            letter-spacing: 0.04em;
            text-transform: uppercase;
            color: #2c3e4f;
        }

        .ta-form-group input,
        .ta-form-group select {
            padding: 10px 12px;
            border-radius: 8px;
            border: 1px solid #4b5563;
            background: #ffffff;
            color: #2c3e4f;
            font-size: 14px;
        }

        .ta-form-group input:focus,
        .ta-form-group select:focus {
            outline: none;
            border-color: #1d4ed8;
            box-shadow: 0 0 0 1px rgba(37,99,235,0.4);
        }

        .ta-form-actions {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }

        .ta-submit-btn {
            padding: 10px 22px;
            border-radius: 999px;
            border: none;
            background: #182e42;
            color: #fff;
            font-weight: 600;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            cursor: pointer;
            transition: transform 0.1s ease, box-shadow 0.15s ease, background 0.15s ease;
        }

        .ta-submit-btn:hover {
            background: #2a4965;
            transform: translateY(-1px);
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3);
        }

        .ta-form-card > svg {
            width: 100%;
            max-width: 900px;
        }

    </style>
</head>
<body>

    <header class="navbar">
        <div class="nav-title">Digital Asset Analytics System</div>
        <nav class="nav-links">
            <a th:href="@{/}">Home</a>
            <a th:href="@{/lstm-form}">LSTM Forecast</a>
            <a th:href="@{/nlp}">Sentiment Analysis</a>
        </nav>
    </header>

    <div class="page-wrapper">
        <div class="ta-form-card">
            <h1>Run LSTM Forecast</h1>

            <form th:action="@{/lstm}" method="get">
                <div class="ta-form-grid">

                    <div class="ta-form-group">
                        <label for="symbol">Symbol</label>
                        <input id="symbol"
                               name="symbol"
                               type="text"
                               placeholder="bitcoin"
                               value="bitcoin"/>
                    </div>

                    <div class="ta-form-group">
                        <label for="limit">Number of days</label>
                        <input id="limit"
                               name="days"
                               type="number"
                               value="20"/>
                    </div>

                </div>

                <div class="ta-form-actions">
                    <button type="submit" class="ta-submit-btn">
                        Predict
                    </button>
                </div>

            </form>
        </div>

        <div class="ta-form-card" style="margin-bottom: 24px;">
            <h1 style="font-size: 26px; margin-bottom: 16px; text-align:center;">
                LSTM Model Architecture
            </h1>

            <div class="table-slider" style="margin-top: 12px;">
                <table style="width:100%; border-collapse:collapse; font-size: 16px; color:#2c3e4f;">
                    <thead>
                    <tr style="background:#f4f7fb;">
                        <th style="border:1px solid #cbd5e1; padding:8px; text-align:center;">Layer (type)</th>
                        <th style="border:1px solid #cbd5e1; padding:8px; text-align:center;">Output Shape</th>
                        <th style="border:1px solid #cbd5e1; padding:8px; text-align:center;">Param #</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td style="border:1px solid #cbd5e1; padding:8px;">lstm_1 (LSTM, 32)</td>
                        <td style="border:1px solid #cbd5e1; padding:8px;">(None, 30, 32)</td>
                        <td style="border:1px solid #cbd5e1; padding:8px; text-align:center;">4,352</td>
                    </tr>
                    <tr>
                        <td style="border:1px solid #cbd5e1; padding:8px;">dropout_1 (Dropout, 0.2)</td>
                        <td style="border:1px solid #cbd5e1; padding:8px;">(None, 30, 32)</td>
                        <td style="border:1px solid #cbd5e1; padding:8px; text-align:center;">0</td>
                    </tr>
                    <tr>
                        <td style="border:1px solid #cbd5e1; padding:8px;">lstm_2 (LSTM, 16)</td>
                        <td style="border:1px solid #cbd5e1; padding:8px;">(None, 30, 16)</td>
                        <td style="border:1px solid #cbd5e1; padding:8px; text-align:center;">3,136</td>
                    </tr>
                    <tr>
                        <td style="border:1px solid #cbd5e1; padding:8px;">last timestep</td>
                        <td style="border:1px solid #cbd5e1; padding:8px;">(None, 16)</td>
                        <td style="border:1px solid #cbd5e1; padding:8px; text-align:center;">0</td>
                    </tr>
                    <tr>
                        <td style="border:1px solid #cbd5e1; padding:8px;">dropout_2 (Dropout, 0.2)</td>
                        <td style="border:1px solid #cbd5e1; padding:8px;">(None, 16)</td>
                        <td style="border:1px solid #cbd5e1; padding:8px; text-align:center;">0</td>
                    </tr>
                    <tr>
                        <td style="border:1px solid #cbd5e1; padding:8px;">fc (Dense, 1)</td>
                        <td style="border:1px solid #cbd5e1; padding:8px;">(None, 1)</td>
                        <td style="border:1px solid #cbd5e1; padding:8px; text-align:center;">17</td>
                    </tr>
                    </tbody>
                </table>

                <p style="margin-top:10px; font-size:15px; text-align: left;">
                    Total params: <strong>7,505</strong><br/>
                    Trainable params: <strong>7,505</strong><br/>
                    Non-trainable params: <strong>0</strong>
                </p>
            </div>
        </div>

        <div class="ta-form-card">
            <h1 style="font-size: 26px; margin-bottom: 16px; text-align:center;">
                LSTM Network Diagram
            </h1>

            <svg width="100%" height="260" viewBox="0 0 900 260">
                <rect x="40" y="70" width="180" height="80" rx="12"
                      fill="#ffffff" stroke="#2c3e4f" stroke-width="1.5"/>
                <text x="130" y="100" text-anchor="middle"
                      font-size="14" fill="#2c3e4f">Input sequence</text>
                <text x="130" y="120" text-anchor="middle"
                      font-size="12" fill="#2c3e4f">(30 timesteps × features)</text>

                <rect x="260" y="40" width="180" height="120" rx="12"
                      fill="#ffffff" stroke="#2c3e4f" stroke-width="1.5"/>
                <text x="350" y="70" text-anchor="middle"
                      font-size="14" fill="#2c3e4f">LSTM layer</text>
                <text x="350" y="90" text-anchor="middle"
                      font-size="12" fill="#2c3e4f">32 units</text>
                <text x="350" y="110" text-anchor="middle"
                      font-size="11" fill="#2c3e4f">return_sequences = True</text>

                <rect x="260" y="170" width="180" height="50" rx="12"
                      fill="#f4f7fb" stroke="#cbd5e1" stroke-width="1"/>
                <text x="350" y="200" text-anchor="middle"
                      font-size="12" fill="#2c3e4f">Dropout (20%)</text>

                <rect x="490" y="60" width="180" height="100" rx="12"
                      fill="#ffffff" stroke="#2c3e4f" stroke-width="1.5"/>
                <text x="580" y="85" text-anchor="middle"
                      font-size="14" fill="#2c3e4f">LSTM layer</text>
                <text x="580" y="105" text-anchor="middle"
                      font-size="12" fill="#2c3e4f">16 units</text>

                <rect x="490" y="180" width="180" height="40" rx="12"
                      fill="#f4f7fb" stroke="#cbd5e1" stroke-width="1"/>
                <text x="580" y="205" text-anchor="middle"
                      font-size="12" fill="#2c3e4f">Dropout (20%)</text>

                <rect x="720" y="80" width="120" height="60" rx="12"
                      fill="#ffffff" stroke="#2c3e4f" stroke-width="1.5"/>
                <text x="780" y="105" text-anchor="middle"
                      font-size="14" fill="#2c3e4f">Dense</text>
                <text x="780" y="125" text-anchor="middle"
                      font-size="12" fill="#2c3e4f">1 unit</text>

                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10"
                            refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
                        <path d="M0,0 L0,6 L9,3 z" fill="#2c3e4f"/>
                    </marker>
                </defs>

                <line x1="220" y1="110" x2="260" y2="100"
                      stroke="#2c3e4f" stroke-width="1.5" marker-end="url(#arrow)"/>
                <line x1="440" y1="100" x2="490" y2="100"
                      stroke="#2c3e4f" stroke-width="1.5" marker-end="url(#arrow)"/>
                <line x1="670" y1="100" x2="720" y2="110"
                      stroke="#2c3e4f" stroke-width="1.5" marker-end="url(#arrow)"/>

                <circle cx="290" cy="125" r="5" fill="#2c3e4f"/>
                <circle cx="310" cy="125" r="5" fill="#2c3e4f"/>
                <circle cx="330" cy="125" r="5" fill="#2c3e4f"/>
                <circle cx="350" cy="125" r="5" fill="#2c3e4f"/>
                <circle cx="370" cy="125" r="5" fill="#2c3e4f"/>
                <circle cx="390" cy="125" r="5" fill="#2c3e4f"/>
                <text x="350" y="145" text-anchor="middle"
                      font-size="11" fill="#2c3e4f">… 32 nodes</text>

                <circle cx="520" cy="130" r="5" fill="#2c3e4f"/>
                <circle cx="540" cy="130" r="5" fill="#2c3e4f"/>
                <circle cx="560" cy="130" r="5" fill="#2c3e4f"/>
                <circle cx="580" cy="130" r="5" fill="#2c3e4f"/>
                <circle cx="600" cy="130" r="5" fill="#2c3e4f"/>
                <circle cx="620" cy="130" r="5" fill="#2c3e4f"/>
                <text x="580" y="150" text-anchor="middle"
                      font-size="11" fill="#2c3e4f">… 16 nodes</text>
            </svg>
        </div>

        <div class="ta-form-card">

            <h1 style="font-size: 26px; margin-bottom: 16px; text-align:center;">
                LSTM Network Graph
            </h1>

            <svg viewBox="0 0 900 340" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <marker id="arrowHead" markerWidth="10" markerHeight="10" refX="10" refY="3" orient="auto">
                        <path d="M0,0 L10,3 L0,6 z" fill="#0f172a" />
                    </marker>

                    <filter id="cardShadow" x="-20%" y="-20%" width="140%" height="140%">
                        <feDropShadow dx="0" dy="4" stdDeviation="6" flood-color="#0f172a" flood-opacity="0.12" />
                    </filter>

                    <circle id="neuron" r="8" fill="#111827" />
                </defs>

                <rect x="20" y="20" rx="20"
                      fill="#f9fafb" stroke="#e5e7eb" stroke-width="1.5"
                      filter="url(#cardShadow)" />

                <text x="120" y="80" text-anchor="middle"
                      font-family="system-ui" font-size="12" fill="#6b7280">
                    Input layer
                </text>
                <text x="120" y="96" text-anchor="middle"
                      font-family="system-ui" font-size="11" fill="#9ca3af">
                    30 timesteps × features
                </text>

                <text x="320" y="80" text-anchor="middle"
                      font-family="system-ui" font-size="12" fill="#111827" font-weight="600">
                    LSTM (32 units)
                </text>
                <text x="320" y="96" text-anchor="middle"
                      font-family="system-ui" font-size="11" fill="#9ca3af">
                    return_sequences = True
                </text>

                <text x="520" y="80" text-anchor="middle"
                      font-family="system-ui" font-size="12" fill="#111827" font-weight="600">
                    LSTM (16 units)
                </text>
                <text x="520" y="96" text-anchor="middle"
                      font-family="system-ui" font-size="11" fill="#9ca3af">
                    return_sequences = True
                </text>

                <text x="720" y="80" text-anchor="middle"
                      font-family="system-ui" font-size="12" fill="#111827" font-weight="600">
                    Dense (1 unit)
                </text>

                <rect x="280" y="260" width="80" height="26" rx="999"
                      fill="#e0f2fe" stroke="#0ea5e9" stroke-width="1" />
                <text x="320" y="278" text-anchor="middle"
                      font-family="system-ui" font-size="11" fill="#0369a1">
                    Dropout 20%
                </text>

                <rect x="480" y="260" width="80" height="26" rx="999"
                      fill="#e0f2fe" stroke="#0ea5e9" stroke-width="1" />
                <text x="520" y="278" text-anchor="middle"
                      font-family="system-ui" font-size="11" fill="#0369a1">
                    Dropout 20%
                </text>

                <g id="inputLayer">
                    <use href="#neuron" x="120" y="140" />
                    <use href="#neuron" x="120" y="180" />
                    <use href="#neuron" x="120" y="220" />
                    <use href="#neuron" x="120" y="260" />
                </g>

                <g id="lstm64">
                    <use href="#neuron" x="320" y="140" />
                    <use href="#neuron" x="320" y="180" />
                    <use href="#neuron" x="320" y="220" />
                    <use href="#neuron" x="320" y="260" />
                </g>

                <g id="lstm32">
                    <use href="#neuron" x="520" y="140" />
                    <use href="#neuron" x="520" y="180" />
                    <use href="#neuron" x="520" y="220" />
                    <use href="#neuron" x="520" y="260" />
                </g>

                <g id="dense1">
                    <use href="#neuron" x="720" y="200" />
                </g>

                <line x1="120" y1="140" x2="320" y2="140" stroke="#cbd5e1" stroke-width="1.2" />
                <line x1="120" y1="140" x2="320" y2="180" stroke="#e5e7eb" stroke-width="1" />
                <line x1="120" y1="140" x2="320" y2="220" stroke="#e5e7eb" stroke-width="1" />
                <line x1="120" y1="140" x2="320" y2="260" stroke="#e5e7eb" stroke-width="1" />

                <line x1="120" y1="180" x2="320" y2="140" stroke="#e5e7eb" stroke-width="1" />
                <line x1="120" y1="180" x2="320" y2="180" stroke="#cbd5e1" stroke-width="1.2" />
                <line x1="120" y1="180" x2="320" y2="220" stroke="#e5e7eb" stroke-width="1" />
                <line x1="120" y1="180" x2="320" y2="260" stroke="#e5e7eb" stroke-width="1" />

                <line x1="120" y1="220" x2="320" y2="140" stroke="#e5e7eb" stroke-width="1" />
                <line x1="120" y1="220" x2="320" y2="180" stroke="#e5e7eb" stroke-width="1" />
                <line x1="120" y1="220" x2="320" y2="220" stroke="#cbd5e1" stroke-width="1.2" />
                <line x1="120" y1="220" x2="320" y2="260" stroke="#e5e7eb" stroke-width="1" />

                <line x1="120" y1="260" x2="320" y2="140" stroke="#e5e7eb" stroke-width="1" />
                <line x1="120" y1="260" x2="320" y2="180" stroke="#e5e7eb" stroke-width="1" />
                <line x1="120" y1="260" x2="320" y2="220" stroke="#e5e7eb" stroke-width="1" />
                <line x1="120" y1="260" x2="320" y2="260" stroke="#cbd5e1" stroke-width="1.2" />

                <line x1="320" y1="140" x2="520" y2="140" stroke="#cbd5e1" stroke-width="1.2" />
                <line x1="320" y1="140" x2="520" y2="180" stroke="#e5e7eb" stroke-width="1" />
                <line x1="320" y1="140" x2="520" y2="220" stroke="#e5e7eb" stroke-width="1" />
                <line x1="320" y1="140" x2="520" y2="260" stroke="#e5e7eb" stroke-width="1" />

                <line x1="320" y1="180" x2="520" y2="140" stroke="#e5e7eb" stroke-width="1" />
                <line x1="320" y1="180" x2="520" y2="180" stroke="#cbd5e1" stroke-width="1.2" />
                <line x1="320" y1="180" x2="520" y2="220" stroke="#e5e7eb" stroke-width="1" />
                <line x1="320" y1="180" x2="520" y2="260" stroke="#e5e7eb" stroke-width="1" />

                <line x1="320" y1="220" x2="520" y2="140" stroke="#e5e7eb" stroke-width="1" />
                <line x1="320" y1="220" x2="520" y2="180" stroke="#e5e7eb" stroke-width="1" />
                <line x1="320" y1="220" x2="520" y2="220" stroke="#cbd5e1" stroke-width="1.2" />
                <line x1="320" y1="220" x2="520" y2="260" stroke="#e5e7eb" stroke-width="1" />

                <line x1="320" y1="260" x2="520" y2="140" stroke="#e5e7eb" stroke-width="1" />
                <line x1="320" y1="260" x2="520" y2="180" stroke="#e5e7eb" stroke-width="1" />
                <line x1="320" y1="260" x2="520" y2="220" stroke="#e5e7eb" stroke-width="1" />
                <line x1="320" y1="260" x2="520" y2="260" stroke="#cbd5e1" stroke-width="1.2" />

                <line x1="520" y1="140" x2="720" y2="200" stroke="#cbd5e1" stroke-width="1.3" marker-end="url(#arrowHead)" />
                <line x1="520" y1="180" x2="720" y2="200" stroke="#cbd5e1" stroke-width="1.3" marker-end="url(#arrowHead)" />
                <line x1="520" y1="220" x2="720" y2="200" stroke="#cbd5e1" stroke-width="1.3" marker-end="url(#arrowHead)" />
                <line x1="520" y1="260" x2="720" y2="200" stroke="#cbd5e1" stroke-width="1.3" marker-end="url(#arrowHead)" />

                <text x="760" y="204" text-anchor="start"
                      font-family="system-ui" font-size="11" fill="#6b7280">
                    PREDICTION
                </text>
            </svg>
        </div>
    </div>

</body>
</html>
